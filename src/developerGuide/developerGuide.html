

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Developer Guide &mdash; PQ [] documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=2ce43b59" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=590adc1f"></script>
      <script src="../../_static/doctools.js?v=888ff710"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Installation" href="../installation/installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            PQ
              <img src="../../_static/PQ.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../featureList/featureList.html">Feature List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/userGuide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developer Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#project-structure">Project Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#core-directory-layout">Core Directory Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="#core-architecture">Core Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-configuration">Build Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#software-tests">Software Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#unit-testing">Unit Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#integration-testing">Integration Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#github-actions">GitHub Actions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-contribute">How to Contribute</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PQ</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Developer Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/src/developerGuide/developerGuide.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="developer-guide">
<span id="developerguide"></span><h1>Developer Guide<a class="headerlink" href="#developer-guide" title="Link to this heading"></a></h1>
<p>This section includes information for developers who want to contribute to the project. It includes information about the project structure, how to run the tests, and how to build the documentation. It also includes information about the project’s coding style and how to contribute to the project.</p>
<section id="project-structure">
<h2>Project Structure<a class="headerlink" href="#project-structure" title="Link to this heading"></a></h2>
<p><strong>PQ</strong> is a C++ molecular dynamics simulation engine with Python bindings, organized into a modular architecture. The project follows standard C++ project conventions with clear separation between headers, source code, applications, tests, and documentation.</p>
<section id="core-directory-layout">
<h3>Core Directory Layout<a class="headerlink" href="#core-directory-layout" title="Link to this heading"></a></h3>
<p>The main directories are organized as follows:</p>
<dl class="simple">
<dt><strong>Source Code:</strong></dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src/</span></code> - Implementation files (.cpp) containing the core functionality</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">include/</span></code> - Header files (.hpp) defining interfaces and declarations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apps/</span></code> - Main application executable (PQ.cpp)</p></li>
</ul>
</dd>
<dt><strong>Build System:</strong></dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> - Main CMake configuration file</p></li>
</ul>
</dd>
<dt><strong>Testing:</strong></dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tests/</span></code> - Unit tests for individual components</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">integration_tests/</span></code> - Integration tests using pytest</p></li>
</ul>
</dd>
<dt><strong>Documentation:</strong></dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">docs/</span></code> - Sphinx documentation source files and build configuration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> - Project overview and installation instructions</p></li>
</ul>
</dd>
<dt><strong>External Dependencies:</strong></dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">external/</span></code> - Third-party libraries (googletest, progressbar, toml++)</p></li>
</ul>
</dd>
<dt><strong>Utilities:</strong></dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scripts/</span></code> - Build scripts, Singularity definition files, and utility scripts</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">examples/</span></code> - Example simulation input files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config/</span></code> - License headers</p></li>
</ul>
</dd>
</dl>
</section>
<section id="core-architecture">
<h3>Core Architecture<a class="headerlink" href="#core-architecture" title="Link to this heading"></a></h3>
<p>The <strong>PQ</strong> codebase is organized into functional modules, each contained in its own directory within both <code class="docutils literal notranslate"><span class="pre">src/</span></code> and <code class="docutils literal notranslate"><span class="pre">include/</span></code>:</p>
<dl class="simple">
<dt><strong>Simulation Engine:</strong></dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">engine/</span></code> - Main simulation engine and orchestration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">integrator/</span></code> - Numerical integration algorithms</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thermostat/</span></code> - Temperature control algorithms</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">manostat/</span></code> - Pressure control algorithms</p></li>
</ul>
</dd>
<dt><strong>Physical Models:</strong></dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">forceField/</span></code> - MM bonded interactions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">intraNonBonded/</span></code> - MM intramolecular non-bonded interactions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">potential/</span></code> - MM intermolecular non-bonded interactions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">QM/</span></code> - Interface to QM runner programs</p></li>
</ul>
</dd>
<dt><strong>System Setup:</strong></dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">input/</span></code> - Input and setup file parsing</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup/</span></code> - System initialization and configuration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">simulationBox/</span></code> - Simulation cell, molecule and atom handling</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">connectivity/</span></code> - Molecular topology and bonding information</p></li>
</ul>
</dd>
<dt><strong>Data Management:</strong></dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">box/</span></code> - Simulation box geometry and periodic boundary conditions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">physicalData/</span></code> - Physical constants and unit conversions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output/</span></code> - Output file generation and data writing</p></li>
</ul>
</dd>
<dt><strong>Computational Infrastructure:</strong></dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">linearAlgebra/</span></code> - Vector and matrix operations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">utilities/</span></code> - General utility functions and helpers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kernels/</span></code> - Computational kernels and optimized routines</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timings/</span></code> - Performance profiling and timing utilities</p></li>
</ul>
</dd>
<dt><strong>Advanced Features:</strong></dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">constraints/</span></code> - Constraint algorithms (SHAKE, RATTLE, etc.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxwellBoltzmann/</span></code> - Maxwell-Boltzmann velocity initialization</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resetKinetics/</span></code> - Kinetic energy manipulation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">virial/</span></code> - Virial stress tensor calculations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mpi/</span></code> - MPI parallelization support</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python/</span></code> - Python bindings and interface</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">opt/</span></code> - Optimization algorithms</p></li>
</ul>
</dd>
<dt><strong>Design Patterns:</strong></dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">concepts/</span></code> - C++20 concepts for template constraints</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exceptions/</span></code> - Custom exception classes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">settings/</span></code> - Configuration and settings management</p></li>
</ul>
</dd>
</dl>
</section>
<section id="build-configuration">
<h3>Build Configuration<a class="headerlink" href="#build-configuration" title="Link to this heading"></a></h3>
<p>The project uses CMake as its build system:</p>
<blockquote>
<div><ul class="simple">
<li><p>Root <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> configures the overall project</p></li>
<li><p>Each major directory contains its own <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> for modular compilation</p></li>
<li><p>External dependencies are managed through CMake’s FetchContent or find_package</p></li>
<li><p>Support for different build types (Debug, Release) and optional features (MPI support)</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="software-tests">
<h2>Software Tests<a class="headerlink" href="#software-tests" title="Link to this heading"></a></h2>
<section id="unit-testing">
<h3>Unit Testing<a class="headerlink" href="#unit-testing" title="Link to this heading"></a></h3>
<p>Unit tests are located in the <code class="docutils literal notranslate"><span class="pre">PQ/tests/</span></code> directory.
After building the project, the unit tests can be run by executing the command <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code> from within the build directory.</p>
</section>
<section id="integration-testing">
<h3>Integration Testing<a class="headerlink" href="#integration-testing" title="Link to this heading"></a></h3>
<p>Integration tests are located in the <code class="docutils literal notranslate"><span class="pre">PQ/integration_tests/</span></code> directory.
To run these tests, ensure the following Python packages are installed:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://pypi.org/project/pytest/">pytest</a></p></li>
<li><p><a class="reference external" href="https://pypi.org/project/pytest-cov/">pytest-cov</a></p></li>
<li><p><a class="reference external" href="https://pypi.org/project/pqanalysis/">pqanalysis</a></p></li>
<li><p><a class="reference external" href="https://pypi.org/project/ase/">ase</a></p></li>
<li><p><a class="reference external" href="https://pypi.org/project/pyscf/">pyscf</a></p></li>
</ul>
</div></blockquote>
<p>In addition, the <a class="reference external" href="https://dftbplus.org/index.html">DFTB+</a> program package has to be installed.
You can then run the integration tests with the command <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">PQ/integration_tests</span></code>.</p>
</section>
<section id="github-actions">
<h3>GitHub Actions<a class="headerlink" href="#github-actions" title="Link to this heading"></a></h3>
<p>The software workflow — from building the project to running unit and integration tests — is validated by continuous integration (CI) using GitHub Actions.
The corresponding workflow configuration files are located in the <code class="docutils literal notranslate"><span class="pre">PQ/.github/workflows/</span></code> directory.</p>
</section>
</section>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Link to this heading"></a></h2>
<p>This documentation is written as <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/index.html">reStructuredText</a> files <code class="docutils literal notranslate"><span class="pre">.rst</span></code> and converted to HTML website files by <a class="reference external" href="https://www.sphinx-doc.org/en/master/index.html">Sphinx</a> .
The respective source files are located in <code class="docutils literal notranslate"><span class="pre">PQ/docs/sphinx/src/</span></code>.
In order to compile the files locally you need to install the following Python packages:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://pypi.org/project/Sphinx/">Sphinx</a></p></li>
<li><p><a class="reference external" href="https://pypi.org/project/sphinx-sitemap/">sphinx_sitemap</a></p></li>
<li><p><a class="reference external" href="https://pypi.org/project/breathe/">breathe</a></p></li>
<li><p><a class="reference external" href="https://pypi.org/project/sphinx-rtd-theme/">sphinx_rtd_theme</a></p></li>
</ul>
</div></blockquote>
<p>The project is built by running <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code> in the folder <code class="docutils literal notranslate"><span class="pre">PQ/docs/sphinx/</span></code>.
The resulting website can be viewed by opening the file <code class="docutils literal notranslate"><span class="pre">PQ/docs/sphinx/_build/html/index.html</span></code> <em>via</em> your favorite browser.</p>
</section>
<section id="how-to-contribute">
<h2>How to Contribute<a class="headerlink" href="#how-to-contribute" title="Link to this heading"></a></h2>
<p>For anyone willing to contribute to the project, it is important to understand the branching model used by the project. The project uses the <a class="reference external" href="http://nvie.com/posts/a-successful-git-branching-model/">Gitflow</a> branching model. In order to contribute to the project, please follow these steps:</p>
<blockquote>
<div><ol class="arabic">
<li><p>Fork the project on GitHub. (not necessary if you are a member of the project)</p></li>
<li><p>Clone your fork locally:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/MolarVerse/PQ.git
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Initialize git flow with the following settings (if not specified default settings are used)</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>master<span class="o">]</span><span class="w"> </span>main
<span class="o">[</span>develop<span class="o">]</span><span class="w"> </span>dev
<span class="o">[</span>version<span class="w"> </span>tag<span class="w"> </span>prefix<span class="o">]</span><span class="w"> </span>v
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Create a feature branch for your contribution:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>flow<span class="w"> </span>feature<span class="w"> </span>start<span class="w"> </span>&lt;feature_branch_name&gt;
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Commit your changes to your feature branch and publish your feature branch:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>&lt;files&gt;
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;commit message&quot;</span>
$<span class="w"> </span>git<span class="w"> </span>flow<span class="w"> </span>feature<span class="w"> </span>publish<span class="w"> </span>&lt;feature_branch_name&gt;
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Create a pull request on GitHub.</p></li>
</ol>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../installation/installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Jakob Gamper.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
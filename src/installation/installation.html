

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; PQ [] documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=2ce43b59" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=590adc1f"></script>
      <script src="../../_static/doctools.js?v=888ff710"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Developer Guide" href="../developerGuide/developerGuide.html" />
    <link rel="prev" title="Output Files" href="../userGuide/outputFiles.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            PQ
              <img src="../../_static/PQ.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../featureList/featureList.html">Feature List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userGuide/userGuide.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#building-from-source">Building from Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="#singularity">Singularity</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developerGuide/developerGuide.html">Developer Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PQ</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/src/installation/installation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<span id="userg-installation"></span><h1>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h1>
<section id="building-from-source">
<h2>Building from Source<a class="headerlink" href="#building-from-source" title="Link to this heading"></a></h2>
<p><strong>Prerequisites</strong></p>
<ul class="simple">
<li><p>CMake &gt;= 3.18</p></li>
<li><p>GCC &gt;= 13.0</p></li>
</ul>
<p>Clone the PQ GitHub repository and navigate into the directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/MolarVerse/PQ.git
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>PQ
</pre></div>
</div>
<p>Create a build directory and navigate into this directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkdir<span class="w"> </span>build
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
</pre></div>
</div>
<p>Within this directory configure cmake:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cmake<span class="w"> </span>../<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release
</pre></div>
</div>
<p>Optionally it is also possible to enable MPI for Ring Polymer MD</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cmake<span class="w"> </span>../<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release<span class="w"> </span>-DBUILD_WITH_MPI<span class="o">=</span>On
</pre></div>
</div>
<p>For compilation then type:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>make<span class="w"> </span>-j<span class="w"> </span>&lt;number_of_processors&gt;
</pre></div>
</div>
</section>
<section id="singularity">
<span id="id1"></span><h2>Singularity<a class="headerlink" href="#singularity" title="Link to this heading"></a></h2>
<p>Singularity is a containerization tool that allows to run applications in a container. This is especially useful
for running applications on HPC systems where the user does not have root access. Singularity is available on most
HPC systems. The PQ software package provides three (hopefully) useful singularity definition files, which can be
found in the <a class="reference external" href="https://github.com/MolarVerse/PQ">https://github.com/MolarVerse/PQ</a>.</p>
<p>The file <code class="docutils literal notranslate"><span class="pre">PQ.def</span></code> represents a definition file to build a singularity container based on a fully sequential build
of the latest release of PQ. The file <code class="docutils literal notranslate"><span class="pre">PQ_openmpi.def</span></code> is an extension of the previously mentioned definition
file - including the OpenMPI library of choice and therefore compiled with MPI support. As MPI application are highly
restricted regarding the applied MPI version, before building the container the __VERSION__ in the definition file
has to be substituted with the desired OpenMPI version. Therefore, a small and simple bash script <code class="docutils literal notranslate"><span class="pre">inferOpenMpiVersion.sh</span></code>
is provided, which automatically substitutes the __VERSION__ with the desired OpenMPI version when given as command
line argument or if no CLI argument is given it tries to infer the needed OpenMPI variable from the environment variable <code class="docutils literal notranslate"><span class="pre">$PATH</span></code>.</p>
<p>In order to build both containers from the singularity file the following command can be used:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>singularity<span class="w"> </span>build<span class="w"> </span>--fakeroot<span class="w"> </span>&lt;name_of_container&gt;.sif<span class="w"> </span>&lt;name_of_definiton_file&gt;.def
</pre></div>
</div>
<p>In order to execute the program <em>via</em> the singularity container two possible commands are shown below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>singularity<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>--env<span class="w"> </span><span class="nv">MYPATH</span><span class="o">=</span><span class="nv">$PATH</span><span class="w"> </span>&lt;name_of_container&gt;.sif<span class="w"> </span>/data/PQ/build/apps/PQ<span class="w"> </span>&lt;name_of_input_file&gt;
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>singularity<span class="w"> </span>run<span class="w"> </span>--env<span class="w"> </span><span class="nv">MYPATH</span><span class="o">=</span><span class="nv">$PATH</span><span class="w"> </span>&lt;name_of_container&gt;.sif<span class="w"> </span>&lt;name_of_input_file&gt;
</pre></div>
</div>
<p>Depending on the directory structure of the host system it might be necessary to bind/mound the directory containing the
input file to the container. This can be achieved by adding <code class="docutils literal notranslate"><span class="pre">--bind</span> <span class="pre">$PWD</span></code> to the singularity command.</p>
<p>The third definiton file is only experimental at the moment as it is used in combination with a miniconda environment in the
container. This should make it possible in future releases to build the singularity container based on an environment.yml file.
This definiton file is called <code class="docutils literal notranslate"><span class="pre">PQ_conda.def</span></code>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../userGuide/outputFiles.html" class="btn btn-neutral float-left" title="Output Files" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../developerGuide/developerGuide.html" class="btn btn-neutral float-right" title="Developer Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Jakob Gamper.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>